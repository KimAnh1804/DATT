{"ast":null,"code":"\"use client\";import{useState,useEffect}from\"react\";import{jsx as _jsx,jsxs as _jsxs,Fragment as _Fragment}from\"react/jsx-runtime\";const Orders=()=>{const[orders,setOrders]=useState([]);const[products,setProducts]=useState([]);const[loading,setLoading]=useState(true);const[showModal,setShowModal]=useState(false);const[showDetailModal,setShowDetailModal]=useState(false);const[selectedOrder,setSelectedOrder]=useState(null);const[saving,setSaving]=useState(false);const[formData,setFormData]=useState({customerName:\"\",customerPhone:\"\",items:[{productId:\"\",quantity:1}]});useEffect(()=>{fetchOrders();fetchProducts();},[]);const fetchOrders=async()=>{try{const token=localStorage.getItem(\"token\");const response=await fetch(\"http://localhost:5000/api/orders\",{headers:{Authorization:`Bearer ${token}`}});if(response.ok){const data=await response.json();setOrders(data);}}catch(error){console.error(\"Error fetching orders:\",error);}finally{setLoading(false);}};const fetchProducts=async()=>{try{const token=localStorage.getItem(\"token\");const response=await fetch(\"http://localhost:5000/api/products\",{headers:{Authorization:`Bearer ${token}`}});if(response.ok){const data=await response.json();setProducts(data);}}catch(error){console.error(\"Error fetching products:\",error);}};const handleSubmit=async e=>{e.preventDefault();setSaving(true);try{// Validate form data\nif(!formData.customerName.trim()||!formData.customerPhone.trim()){alert(\"Vui lòng nhập đầy đủ thông tin khách hàng!\");setSaving(false);return;}// Validate items\nconst validItems=formData.items.filter(item=>item.productId&&item.quantity>0);if(validItems.length===0){alert(\"Vui lòng chọn ít nhất một sản phẩm!\");setSaving(false);return;}// Check stock for each item\nfor(const item of validItems){const product=products.find(p=>p._id===item.productId);if(product&&product.stock<item.quantity){alert(`Sản phẩm \"${product.name}\" không đủ số lượng. Còn lại: ${product.stock}`);setSaving(false);return;}}const token=localStorage.getItem(\"token\");const response=await fetch(\"http://localhost:5000/api/orders\",{method:\"POST\",headers:{\"Content-Type\":\"application/json\",Authorization:`Bearer ${token}`},body:JSON.stringify({customerName:formData.customerName.trim(),customerPhone:formData.customerPhone.trim(),items:validItems})});if(response.ok){await fetchOrders();await fetchProducts();// Refresh products to update stock\nsetShowModal(false);resetForm();alert(\"Tạo đơn hàng thành công!\");}else{const error=await response.json();alert(error.message||\"Có lỗi xảy ra khi tạo đơn hàng!\");}}catch(error){console.error(\"Error creating order:\",error);alert(\"Có lỗi xảy ra khi tạo đơn hàng!\");}finally{setSaving(false);}};const updateOrderStatus=async(orderId,newStatus)=>{try{const token=localStorage.getItem(\"token\");const response=await fetch(`http://localhost:5000/api/orders/${orderId}/status`,{method:\"PUT\",headers:{\"Content-Type\":\"application/json\",Authorization:`Bearer ${token}`},body:JSON.stringify({status:newStatus})});if(response.ok){await fetchOrders();alert(\"Cập nhật trạng thái thành công!\");}else{alert(\"Có lỗi xảy ra khi cập nhật trạng thái!\");}}catch(error){console.error(\"Error updating order status:\",error);alert(\"Có lỗi xảy ra!\");}};const resetForm=()=>{setFormData({customerName:\"\",customerPhone:\"\",items:[{productId:\"\",quantity:1}]});};const addOrderItem=()=>{setFormData({...formData,items:[...formData.items,{productId:\"\",quantity:1}]});};const removeOrderItem=index=>{const newItems=formData.items.filter((_,i)=>i!==index);setFormData({...formData,items:newItems});};const updateOrderItem=(index,field,value)=>{const newItems=[...formData.items];newItems[index]={...newItems[index],[field]:value};setFormData({...formData,items:newItems});};const getStatusBadge=status=>{switch(status){case\"pending\":return/*#__PURE__*/_jsx(\"span\",{className:\"badge-warning\",children:\"Ch\\u1EDD x\\u1EED l\\xFD\"});case\"completed\":return/*#__PURE__*/_jsx(\"span\",{className:\"badge-success\",children:\"Ho\\xE0n th\\xE0nh\"});case\"cancelled\":return/*#__PURE__*/_jsx(\"span\",{className:\"badge-danger\",children:\"\\u0110\\xE3 h\\u1EE7y\"});default:return/*#__PURE__*/_jsx(\"span\",{className:\"badge-info\",children:status});}};const viewOrderDetail=order=>{setSelectedOrder(order);setShowDetailModal(true);};if(loading){return/*#__PURE__*/_jsx(\"div\",{className:\"text-center py-8\",children:\"\\u0110ang t\\u1EA3i d\\u1EEF li\\u1EC7u...\"});}return/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex justify-between items-center mb-6\",children:[/*#__PURE__*/_jsx(\"h1\",{className:\"text-2xl font-bold text-gray-900\",children:\"Qu\\u1EA3n l\\xFD \\u0111\\u01A1n h\\xE0ng\"}),/*#__PURE__*/_jsx(\"button\",{onClick:()=>setShowModal(true),className:\"btn-primary\",children:\"+ T\\u1EA1o \\u0111\\u01A1n h\\xE0ng\"})]}),/*#__PURE__*/_jsx(\"div\",{className:\"bg-white shadow overflow-hidden sm:rounded-md\",children:/*#__PURE__*/_jsx(\"div\",{className:\"table-responsive\",children:/*#__PURE__*/_jsxs(\"table\",{className:\"min-w-full divide-y divide-gray-200\",children:[/*#__PURE__*/_jsx(\"thead\",{className:\"bg-gray-50\",children:/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"th\",{className:\"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider\",children:\"M\\xE3 \\u0111\\u01A1n h\\xE0ng\"}),/*#__PURE__*/_jsx(\"th\",{className:\"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider\",children:\"Ng\\xE0y t\\u1EA1o\"}),/*#__PURE__*/_jsx(\"th\",{className:\"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider\",children:\"Kh\\xE1ch h\\xE0ng\"}),/*#__PURE__*/_jsx(\"th\",{className:\"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider\",children:\"S\\u1ED1 \\u0111i\\u1EC7n tho\\u1EA1i\"}),/*#__PURE__*/_jsx(\"th\",{className:\"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider\",children:\"T\\u1ED5ng ti\\u1EC1n\"}),/*#__PURE__*/_jsx(\"th\",{className:\"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider\",children:\"Tr\\u1EA1ng th\\xE1i\"}),/*#__PURE__*/_jsx(\"th\",{className:\"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider\",children:\"Thao t\\xE1c\"})]})}),/*#__PURE__*/_jsx(\"tbody\",{className:\"bg-white divide-y divide-gray-200\",children:orders.map(order=>/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"td\",{className:\"px-6 py-4 whitespace-nowrap text-sm font-medium text-gray-900\",children:order.orderNumber}),/*#__PURE__*/_jsx(\"td\",{className:\"px-6 py-4 whitespace-nowrap text-sm text-gray-900\",children:new Date(order.createdAt).toLocaleDateString(\"vi-VN\")}),/*#__PURE__*/_jsx(\"td\",{className:\"px-6 py-4 whitespace-nowrap text-sm text-gray-900\",children:order.customerName}),/*#__PURE__*/_jsx(\"td\",{className:\"px-6 py-4 whitespace-nowrap text-sm text-gray-900\",children:order.customerPhone}),/*#__PURE__*/_jsxs(\"td\",{className:\"px-6 py-4 whitespace-nowrap text-sm text-gray-900\",children:[order.totalAmount.toLocaleString(\"vi-VN\"),\" VN\\u0110\"]}),/*#__PURE__*/_jsx(\"td\",{className:\"px-6 py-4 whitespace-nowrap\",children:getStatusBadge(order.status)}),/*#__PURE__*/_jsxs(\"td\",{className:\"px-6 py-4 whitespace-nowrap text-sm font-medium\",children:[/*#__PURE__*/_jsx(\"button\",{onClick:()=>viewOrderDetail(order),className:\"text-blue-600 hover:text-blue-900 mr-3\",children:\"Chi ti\\u1EBFt\"}),order.status===\"pending\"&&/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(\"button\",{onClick:()=>updateOrderStatus(order._id,\"completed\"),className:\"text-green-600 hover:text-green-900 mr-3\",children:\"Ho\\xE0n th\\xE0nh\"}),/*#__PURE__*/_jsx(\"button\",{onClick:()=>updateOrderStatus(order._id,\"cancelled\"),className:\"text-red-600 hover:text-red-900\",children:\"H\\u1EE7y\"})]})]})]},order._id))})]})})}),showModal&&/*#__PURE__*/_jsx(\"div\",{className:\"fixed inset-0 bg-gray-600 bg-opacity-50 overflow-y-auto h-full w-full z-50\",children:/*#__PURE__*/_jsx(\"div\",{className:\"relative top-10 mx-auto p-5 border w-full max-w-2xl shadow-lg rounded-md bg-white\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"mt-3\",children:[/*#__PURE__*/_jsx(\"h3\",{className:\"text-lg font-medium text-gray-900 mb-4\",children:\"T\\u1EA1o \\u0111\\u01A1n h\\xE0ng m\\u1EDBi\"}),/*#__PURE__*/_jsxs(\"form\",{onSubmit:handleSubmit,children:[/*#__PURE__*/_jsxs(\"div\",{className:\"grid grid-cols-2 gap-4 mb-4\",children:[/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{className:\"block text-gray-700 text-sm font-bold mb-2\",children:\"T\\xEAn kh\\xE1ch h\\xE0ng *\"}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",value:formData.customerName,onChange:e=>setFormData({...formData,customerName:e.target.value}),className:\"form-input\",required:true})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{className:\"block text-gray-700 text-sm font-bold mb-2\",children:\"S\\u1ED1 \\u0111i\\u1EC7n tho\\u1EA1i *\"}),/*#__PURE__*/_jsx(\"input\",{type:\"tel\",value:formData.customerPhone,onChange:e=>setFormData({...formData,customerPhone:e.target.value}),className:\"form-input\",required:true})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"mb-4\",children:[/*#__PURE__*/_jsx(\"label\",{className:\"block text-gray-700 text-sm font-bold mb-2\",children:\"S\\u1EA3n ph\\u1EA9m\"}),formData.items.map((item,index)=>{var _products$find,_products$find2;return/*#__PURE__*/_jsxs(\"div\",{className:\"flex gap-2 mb-2 items-center\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"flex-1\",children:/*#__PURE__*/_jsxs(\"select\",{value:item.productId,onChange:e=>updateOrderItem(index,\"productId\",e.target.value),className:\"form-input\",required:true,children:[/*#__PURE__*/_jsx(\"option\",{value:\"\",children:\"Ch\\u1ECDn s\\u1EA3n ph\\u1EA9m\"}),products.filter(p=>p.stock>0).map(product=>/*#__PURE__*/_jsxs(\"option\",{value:product._id,children:[product.name,\" - \",product.sellPrice.toLocaleString(\"vi-VN\"),\" VN\\u0110 (C\\xF2n: \",product.stock,\")\"]},product._id))]})}),/*#__PURE__*/_jsx(\"div\",{className:\"w-24\",children:/*#__PURE__*/_jsx(\"input\",{type:\"number\",value:item.quantity,onChange:e=>updateOrderItem(index,\"quantity\",Number(e.target.value)),className:\"form-input\",min:\"1\",max:((_products$find=products.find(p=>p._id===item.productId))===null||_products$find===void 0?void 0:_products$find.stock)||999,required:true})}),/*#__PURE__*/_jsx(\"div\",{className:\"w-32 text-sm text-gray-600\",children:item.productId&&/*#__PURE__*/_jsxs(\"span\",{children:[((((_products$find2=products.find(p=>p._id===item.productId))===null||_products$find2===void 0?void 0:_products$find2.sellPrice)||0)*item.quantity).toLocaleString(\"vi-VN\"),\" \",\"VN\\u0110\"]})}),formData.items.length>1&&/*#__PURE__*/_jsx(\"button\",{type:\"button\",onClick:()=>removeOrderItem(index),className:\"btn-danger px-2 py-1 text-sm\",children:\"X\\xF3a\"})]},index);}),/*#__PURE__*/_jsx(\"button\",{type:\"button\",onClick:addOrderItem,className:\"btn-secondary text-sm mt-2\",children:\"+ Th\\xEAm s\\u1EA3n ph\\u1EA9m\"}),/*#__PURE__*/_jsx(\"div\",{className:\"mt-4 p-3 bg-gray-50 rounded-lg\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"flex justify-between items-center\",children:[/*#__PURE__*/_jsx(\"span\",{className:\"font-medium\",children:\"T\\u1ED5ng ti\\u1EC1n:\"}),/*#__PURE__*/_jsxs(\"span\",{className:\"text-lg font-bold text-blue-600\",children:[formData.items.reduce((total,item)=>{const product=products.find(p=>p._id===item.productId);return total+(product?product.sellPrice*item.quantity:0);},0).toLocaleString(\"vi-VN\"),\" \",\"VN\\u0110\"]})]})})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex justify-end space-x-3\",children:[/*#__PURE__*/_jsx(\"button\",{type:\"button\",onClick:()=>setShowModal(false),className:\"btn-secondary\",disabled:saving,children:\"H\\u1EE7y\"}),/*#__PURE__*/_jsx(\"button\",{type:\"submit\",className:\"btn-primary disabled:opacity-50\",disabled:saving,children:saving?\"Đang tạo...\":\"Tạo đơn hàng\"})]})]})]})})}),showDetailModal&&selectedOrder&&/*#__PURE__*/_jsx(\"div\",{className:\"fixed inset-0 bg-gray-600 bg-opacity-50 overflow-y-auto h-full w-full z-50\",children:/*#__PURE__*/_jsx(\"div\",{className:\"relative top-10 mx-auto p-5 border w-full max-w-2xl shadow-lg rounded-md bg-white\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"mt-3\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex justify-between items-center mb-4\",children:[/*#__PURE__*/_jsx(\"h3\",{className:\"text-lg font-medium text-gray-900\",children:\"Chi ti\\u1EBFt \\u0111\\u01A1n h\\xE0ng\"}),/*#__PURE__*/_jsx(\"button\",{onClick:()=>setShowDetailModal(false),className:\"text-gray-400 hover:text-gray-600\",children:\"\\u2715\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"grid grid-cols-2 gap-4 mb-6\",children:[/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsxs(\"p\",{children:[/*#__PURE__*/_jsx(\"strong\",{children:\"M\\xE3 \\u0111\\u01A1n h\\xE0ng:\"}),\" \",selectedOrder.orderNumber]}),/*#__PURE__*/_jsxs(\"p\",{children:[/*#__PURE__*/_jsx(\"strong\",{children:\"Kh\\xE1ch h\\xE0ng:\"}),\" \",selectedOrder.customerName]}),/*#__PURE__*/_jsxs(\"p\",{children:[/*#__PURE__*/_jsx(\"strong\",{children:\"S\\u1ED1 \\u0111i\\u1EC7n tho\\u1EA1i:\"}),\" \",selectedOrder.customerPhone]})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsxs(\"p\",{children:[/*#__PURE__*/_jsx(\"strong\",{children:\"Ng\\xE0y t\\u1EA1o:\"}),\" \",new Date(selectedOrder.createdAt).toLocaleString(\"vi-VN\")]}),/*#__PURE__*/_jsxs(\"p\",{children:[/*#__PURE__*/_jsx(\"strong\",{children:\"Tr\\u1EA1ng th\\xE1i:\"}),\" \",getStatusBadge(selectedOrder.status)]}),/*#__PURE__*/_jsxs(\"p\",{children:[/*#__PURE__*/_jsx(\"strong\",{children:\"T\\u1ED5ng ti\\u1EC1n:\"}),\" \",selectedOrder.totalAmount.toLocaleString(\"vi-VN\"),\" VN\\u0110\"]})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"mb-4\",children:[/*#__PURE__*/_jsx(\"h4\",{className:\"font-medium mb-2\",children:\"Danh s\\xE1ch s\\u1EA3n ph\\u1EA9m:\"}),/*#__PURE__*/_jsxs(\"table\",{className:\"min-w-full divide-y divide-gray-200\",children:[/*#__PURE__*/_jsx(\"thead\",{className:\"bg-gray-50\",children:/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"th\",{className:\"px-4 py-2 text-left text-xs font-medium text-gray-500 uppercase\",children:\"S\\u1EA3n ph\\u1EA9m\"}),/*#__PURE__*/_jsx(\"th\",{className:\"px-4 py-2 text-left text-xs font-medium text-gray-500 uppercase\",children:\"S\\u1ED1 l\\u01B0\\u1EE3ng\"}),/*#__PURE__*/_jsx(\"th\",{className:\"px-4 py-2 text-left text-xs font-medium text-gray-500 uppercase\",children:\"\\u0110\\u01A1n gi\\xE1\"}),/*#__PURE__*/_jsx(\"th\",{className:\"px-4 py-2 text-left text-xs font-medium text-gray-500 uppercase\",children:\"Th\\xE0nh ti\\u1EC1n\"})]})}),/*#__PURE__*/_jsx(\"tbody\",{className:\"bg-white divide-y divide-gray-200\",children:selectedOrder.items.map((item,index)=>/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"td\",{className:\"px-4 py-2 text-sm text-gray-900\",children:item.product.name}),/*#__PURE__*/_jsx(\"td\",{className:\"px-4 py-2 text-sm text-gray-900\",children:item.quantity}),/*#__PURE__*/_jsxs(\"td\",{className:\"px-4 py-2 text-sm text-gray-900\",children:[item.price.toLocaleString(\"vi-VN\"),\" VN\\u0110\"]}),/*#__PURE__*/_jsxs(\"td\",{className:\"px-4 py-2 text-sm text-gray-900\",children:[(item.quantity*item.price).toLocaleString(\"vi-VN\"),\" VN\\u0110\"]})]},index))})]})]})]})})})]});};export default Orders;","map":{"version":3,"names":["useState","useEffect","jsx","_jsx","jsxs","_jsxs","Fragment","_Fragment","Orders","orders","setOrders","products","setProducts","loading","setLoading","showModal","setShowModal","showDetailModal","setShowDetailModal","selectedOrder","setSelectedOrder","saving","setSaving","formData","setFormData","customerName","customerPhone","items","productId","quantity","fetchOrders","fetchProducts","token","localStorage","getItem","response","fetch","headers","Authorization","ok","data","json","error","console","handleSubmit","e","preventDefault","trim","alert","validItems","filter","item","length","product","find","p","_id","stock","name","method","body","JSON","stringify","resetForm","message","updateOrderStatus","orderId","newStatus","status","addOrderItem","removeOrderItem","index","newItems","_","i","updateOrderItem","field","value","getStatusBadge","className","children","viewOrderDetail","order","onClick","map","orderNumber","Date","createdAt","toLocaleDateString","totalAmount","toLocaleString","onSubmit","type","onChange","target","required","_products$find","_products$find2","sellPrice","Number","min","max","reduce","total","disabled","price"],"sources":["D:/DU LIEU O D/Code/inventory-management3/frontend/src/components/Orders.tsx"],"sourcesContent":["\"use client\"\n\nimport type React from \"react\"\nimport { useState, useEffect } from \"react\"\n\ninterface Product {\n  _id: string\n  name: string\n  sellPrice: number\n  stock: number\n  unit: string\n}\n\ninterface OrderItem {\n  product: {\n    _id: string\n    name: string\n    sellPrice: number\n  }\n  quantity: number\n  price: number\n}\n\ninterface Order {\n  _id: string\n  orderNumber: string\n  customerName: string\n  customerPhone: string\n  items: OrderItem[]\n  totalAmount: number\n  status: \"pending\" | \"completed\" | \"cancelled\"\n  createdAt: string\n}\n\nconst Orders: React.FC = () => {\n  const [orders, setOrders] = useState<Order[]>([])\n  const [products, setProducts] = useState<Product[]>([])\n  const [loading, setLoading] = useState(true)\n  const [showModal, setShowModal] = useState(false)\n  const [showDetailModal, setShowDetailModal] = useState(false)\n  const [selectedOrder, setSelectedOrder] = useState<Order | null>(null)\n  const [saving, setSaving] = useState(false)\n  const [formData, setFormData] = useState({\n    customerName: \"\",\n    customerPhone: \"\",\n    items: [{ productId: \"\", quantity: 1 }],\n  })\n\n  useEffect(() => {\n    fetchOrders()\n    fetchProducts()\n  }, [])\n\n  const fetchOrders = async () => {\n    try {\n      const token = localStorage.getItem(\"token\")\n      const response = await fetch(\"http://localhost:5000/api/orders\", {\n        headers: {\n          Authorization: `Bearer ${token}`,\n        },\n      })\n\n      if (response.ok) {\n        const data = await response.json()\n        setOrders(data)\n      }\n    } catch (error) {\n      console.error(\"Error fetching orders:\", error)\n    } finally {\n      setLoading(false)\n    }\n  }\n\n  const fetchProducts = async () => {\n    try {\n      const token = localStorage.getItem(\"token\")\n      const response = await fetch(\"http://localhost:5000/api/products\", {\n        headers: {\n          Authorization: `Bearer ${token}`,\n        },\n      })\n\n      if (response.ok) {\n        const data = await response.json()\n        setProducts(data)\n      }\n    } catch (error) {\n      console.error(\"Error fetching products:\", error)\n    }\n  }\n\n  const handleSubmit = async (e: React.FormEvent) => {\n    e.preventDefault()\n    setSaving(true)\n\n    try {\n      // Validate form data\n      if (!formData.customerName.trim() || !formData.customerPhone.trim()) {\n        alert(\"Vui lòng nhập đầy đủ thông tin khách hàng!\")\n        setSaving(false)\n        return\n      }\n\n      // Validate items\n      const validItems = formData.items.filter((item) => item.productId && item.quantity > 0)\n      if (validItems.length === 0) {\n        alert(\"Vui lòng chọn ít nhất một sản phẩm!\")\n        setSaving(false)\n        return\n      }\n\n      // Check stock for each item\n      for (const item of validItems) {\n        const product = products.find((p) => p._id === item.productId)\n        if (product && product.stock < item.quantity) {\n          alert(`Sản phẩm \"${product.name}\" không đủ số lượng. Còn lại: ${product.stock}`)\n          setSaving(false)\n          return\n        }\n      }\n\n      const token = localStorage.getItem(\"token\")\n      const response = await fetch(\"http://localhost:5000/api/orders\", {\n        method: \"POST\",\n        headers: {\n          \"Content-Type\": \"application/json\",\n          Authorization: `Bearer ${token}`,\n        },\n        body: JSON.stringify({\n          customerName: formData.customerName.trim(),\n          customerPhone: formData.customerPhone.trim(),\n          items: validItems,\n        }),\n      })\n\n      if (response.ok) {\n        await fetchOrders()\n        await fetchProducts() // Refresh products to update stock\n        setShowModal(false)\n        resetForm()\n        alert(\"Tạo đơn hàng thành công!\")\n      } else {\n        const error = await response.json()\n        alert(error.message || \"Có lỗi xảy ra khi tạo đơn hàng!\")\n      }\n    } catch (error) {\n      console.error(\"Error creating order:\", error)\n      alert(\"Có lỗi xảy ra khi tạo đơn hàng!\")\n    } finally {\n      setSaving(false)\n    }\n  }\n\n  const updateOrderStatus = async (orderId: string, newStatus: string) => {\n    try {\n      const token = localStorage.getItem(\"token\")\n      const response = await fetch(`http://localhost:5000/api/orders/${orderId}/status`, {\n        method: \"PUT\",\n        headers: {\n          \"Content-Type\": \"application/json\",\n          Authorization: `Bearer ${token}`,\n        },\n        body: JSON.stringify({ status: newStatus }),\n      })\n\n      if (response.ok) {\n        await fetchOrders()\n        alert(\"Cập nhật trạng thái thành công!\")\n      } else {\n        alert(\"Có lỗi xảy ra khi cập nhật trạng thái!\")\n      }\n    } catch (error) {\n      console.error(\"Error updating order status:\", error)\n      alert(\"Có lỗi xảy ra!\")\n    }\n  }\n\n  const resetForm = () => {\n    setFormData({\n      customerName: \"\",\n      customerPhone: \"\",\n      items: [{ productId: \"\", quantity: 1 }],\n    })\n  }\n\n  const addOrderItem = () => {\n    setFormData({\n      ...formData,\n      items: [...formData.items, { productId: \"\", quantity: 1 }],\n    })\n  }\n\n  const removeOrderItem = (index: number) => {\n    const newItems = formData.items.filter((_, i) => i !== index)\n    setFormData({ ...formData, items: newItems })\n  }\n\n  const updateOrderItem = (index: number, field: string, value: any) => {\n    const newItems = [...formData.items]\n    newItems[index] = { ...newItems[index], [field]: value }\n    setFormData({ ...formData, items: newItems })\n  }\n\n  const getStatusBadge = (status: string) => {\n    switch (status) {\n      case \"pending\":\n        return <span className=\"badge-warning\">Chờ xử lý</span>\n      case \"completed\":\n        return <span className=\"badge-success\">Hoàn thành</span>\n      case \"cancelled\":\n        return <span className=\"badge-danger\">Đã hủy</span>\n      default:\n        return <span className=\"badge-info\">{status}</span>\n    }\n  }\n\n  const viewOrderDetail = (order: Order) => {\n    setSelectedOrder(order)\n    setShowDetailModal(true)\n  }\n\n  if (loading) {\n    return <div className=\"text-center py-8\">Đang tải dữ liệu...</div>\n  }\n\n  return (\n    <div>\n      <div className=\"flex justify-between items-center mb-6\">\n        <h1 className=\"text-2xl font-bold text-gray-900\">Quản lý đơn hàng</h1>\n        <button onClick={() => setShowModal(true)} className=\"btn-primary\">\n          + Tạo đơn hàng\n        </button>\n      </div>\n\n      {/* Orders Table */}\n      <div className=\"bg-white shadow overflow-hidden sm:rounded-md\">\n        <div className=\"table-responsive\">\n          <table className=\"min-w-full divide-y divide-gray-200\">\n            <thead className=\"bg-gray-50\">\n              <tr>\n                <th className=\"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider\">\n                  Mã đơn hàng\n                </th>\n                <th className=\"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider\">\n                  Ngày tạo\n                </th>\n                <th className=\"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider\">\n                  Khách hàng\n                </th>\n                <th className=\"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider\">\n                  Số điện thoại\n                </th>\n                <th className=\"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider\">\n                  Tổng tiền\n                </th>\n                <th className=\"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider\">\n                  Trạng thái\n                </th>\n                <th className=\"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider\">\n                  Thao tác\n                </th>\n              </tr>\n            </thead>\n            <tbody className=\"bg-white divide-y divide-gray-200\">\n              {orders.map((order) => (\n                <tr key={order._id}>\n                  <td className=\"px-6 py-4 whitespace-nowrap text-sm font-medium text-gray-900\">{order.orderNumber}</td>\n                  <td className=\"px-6 py-4 whitespace-nowrap text-sm text-gray-900\">\n                    {new Date(order.createdAt).toLocaleDateString(\"vi-VN\")}\n                  </td>\n                  <td className=\"px-6 py-4 whitespace-nowrap text-sm text-gray-900\">{order.customerName}</td>\n                  <td className=\"px-6 py-4 whitespace-nowrap text-sm text-gray-900\">{order.customerPhone}</td>\n                  <td className=\"px-6 py-4 whitespace-nowrap text-sm text-gray-900\">\n                    {order.totalAmount.toLocaleString(\"vi-VN\")} VNĐ\n                  </td>\n                  <td className=\"px-6 py-4 whitespace-nowrap\">{getStatusBadge(order.status)}</td>\n                  <td className=\"px-6 py-4 whitespace-nowrap text-sm font-medium\">\n                    <button onClick={() => viewOrderDetail(order)} className=\"text-blue-600 hover:text-blue-900 mr-3\">\n                      Chi tiết\n                    </button>\n                    {order.status === \"pending\" && (\n                      <>\n                        <button\n                          onClick={() => updateOrderStatus(order._id, \"completed\")}\n                          className=\"text-green-600 hover:text-green-900 mr-3\"\n                        >\n                          Hoàn thành\n                        </button>\n                        <button\n                          onClick={() => updateOrderStatus(order._id, \"cancelled\")}\n                          className=\"text-red-600 hover:text-red-900\"\n                        >\n                          Hủy\n                        </button>\n                      </>\n                    )}\n                  </td>\n                </tr>\n              ))}\n            </tbody>\n          </table>\n        </div>\n      </div>\n\n      {/* Create Order Modal */}\n      {showModal && (\n        <div className=\"fixed inset-0 bg-gray-600 bg-opacity-50 overflow-y-auto h-full w-full z-50\">\n          <div className=\"relative top-10 mx-auto p-5 border w-full max-w-2xl shadow-lg rounded-md bg-white\">\n            <div className=\"mt-3\">\n              <h3 className=\"text-lg font-medium text-gray-900 mb-4\">Tạo đơn hàng mới</h3>\n              <form onSubmit={handleSubmit}>\n                <div className=\"grid grid-cols-2 gap-4 mb-4\">\n                  <div>\n                    <label className=\"block text-gray-700 text-sm font-bold mb-2\">Tên khách hàng *</label>\n                    <input\n                      type=\"text\"\n                      value={formData.customerName}\n                      onChange={(e) => setFormData({ ...formData, customerName: e.target.value })}\n                      className=\"form-input\"\n                      required\n                    />\n                  </div>\n                  <div>\n                    <label className=\"block text-gray-700 text-sm font-bold mb-2\">Số điện thoại *</label>\n                    <input\n                      type=\"tel\"\n                      value={formData.customerPhone}\n                      onChange={(e) => setFormData({ ...formData, customerPhone: e.target.value })}\n                      className=\"form-input\"\n                      required\n                    />\n                  </div>\n                </div>\n\n                <div className=\"mb-4\">\n                  <label className=\"block text-gray-700 text-sm font-bold mb-2\">Sản phẩm</label>\n                  {formData.items.map((item, index) => (\n                    <div key={index} className=\"flex gap-2 mb-2 items-center\">\n                      <div className=\"flex-1\">\n                        <select\n                          value={item.productId}\n                          onChange={(e) => updateOrderItem(index, \"productId\", e.target.value)}\n                          className=\"form-input\"\n                          required\n                        >\n                          <option value=\"\">Chọn sản phẩm</option>\n                          {products\n                            .filter((p) => p.stock > 0)\n                            .map((product) => (\n                              <option key={product._id} value={product._id}>\n                                {product.name} - {product.sellPrice.toLocaleString(\"vi-VN\")} VNĐ (Còn: {product.stock})\n                              </option>\n                            ))}\n                        </select>\n                      </div>\n                      <div className=\"w-24\">\n                        <input\n                          type=\"number\"\n                          value={item.quantity}\n                          onChange={(e) => updateOrderItem(index, \"quantity\", Number(e.target.value))}\n                          className=\"form-input\"\n                          min=\"1\"\n                          max={products.find((p) => p._id === item.productId)?.stock || 999}\n                          required\n                        />\n                      </div>\n                      <div className=\"w-32 text-sm text-gray-600\">\n                        {item.productId && (\n                          <span>\n                            {(\n                              (products.find((p) => p._id === item.productId)?.sellPrice || 0) * item.quantity\n                            ).toLocaleString(\"vi-VN\")}{\" \"}\n                            VNĐ\n                          </span>\n                        )}\n                      </div>\n                      {formData.items.length > 1 && (\n                        <button\n                          type=\"button\"\n                          onClick={() => removeOrderItem(index)}\n                          className=\"btn-danger px-2 py-1 text-sm\"\n                        >\n                          Xóa\n                        </button>\n                      )}\n                    </div>\n                  ))}\n                  <button type=\"button\" onClick={addOrderItem} className=\"btn-secondary text-sm mt-2\">\n                    + Thêm sản phẩm\n                  </button>\n\n                  {/* Tổng tiền */}\n                  <div className=\"mt-4 p-3 bg-gray-50 rounded-lg\">\n                    <div className=\"flex justify-between items-center\">\n                      <span className=\"font-medium\">Tổng tiền:</span>\n                      <span className=\"text-lg font-bold text-blue-600\">\n                        {formData.items\n                          .reduce((total, item) => {\n                            const product = products.find((p) => p._id === item.productId)\n                            return total + (product ? product.sellPrice * item.quantity : 0)\n                          }, 0)\n                          .toLocaleString(\"vi-VN\")}{\" \"}\n                        VNĐ\n                      </span>\n                    </div>\n                  </div>\n                </div>\n\n                <div className=\"flex justify-end space-x-3\">\n                  <button type=\"button\" onClick={() => setShowModal(false)} className=\"btn-secondary\" disabled={saving}>\n                    Hủy\n                  </button>\n                  <button type=\"submit\" className=\"btn-primary disabled:opacity-50\" disabled={saving}>\n                    {saving ? \"Đang tạo...\" : \"Tạo đơn hàng\"}\n                  </button>\n                </div>\n              </form>\n            </div>\n          </div>\n        </div>\n      )}\n\n      {/* Order Detail Modal */}\n      {showDetailModal && selectedOrder && (\n        <div className=\"fixed inset-0 bg-gray-600 bg-opacity-50 overflow-y-auto h-full w-full z-50\">\n          <div className=\"relative top-10 mx-auto p-5 border w-full max-w-2xl shadow-lg rounded-md bg-white\">\n            <div className=\"mt-3\">\n              <div className=\"flex justify-between items-center mb-4\">\n                <h3 className=\"text-lg font-medium text-gray-900\">Chi tiết đơn hàng</h3>\n                <button onClick={() => setShowDetailModal(false)} className=\"text-gray-400 hover:text-gray-600\">\n                  ✕\n                </button>\n              </div>\n\n              <div className=\"grid grid-cols-2 gap-4 mb-6\">\n                <div>\n                  <p>\n                    <strong>Mã đơn hàng:</strong> {selectedOrder.orderNumber}\n                  </p>\n                  <p>\n                    <strong>Khách hàng:</strong> {selectedOrder.customerName}\n                  </p>\n                  <p>\n                    <strong>Số điện thoại:</strong> {selectedOrder.customerPhone}\n                  </p>\n                </div>\n                <div>\n                  <p>\n                    <strong>Ngày tạo:</strong> {new Date(selectedOrder.createdAt).toLocaleString(\"vi-VN\")}\n                  </p>\n                  <p>\n                    <strong>Trạng thái:</strong> {getStatusBadge(selectedOrder.status)}\n                  </p>\n                  <p>\n                    <strong>Tổng tiền:</strong> {selectedOrder.totalAmount.toLocaleString(\"vi-VN\")} VNĐ\n                  </p>\n                </div>\n              </div>\n\n              <div className=\"mb-4\">\n                <h4 className=\"font-medium mb-2\">Danh sách sản phẩm:</h4>\n                <table className=\"min-w-full divide-y divide-gray-200\">\n                  <thead className=\"bg-gray-50\">\n                    <tr>\n                      <th className=\"px-4 py-2 text-left text-xs font-medium text-gray-500 uppercase\">Sản phẩm</th>\n                      <th className=\"px-4 py-2 text-left text-xs font-medium text-gray-500 uppercase\">Số lượng</th>\n                      <th className=\"px-4 py-2 text-left text-xs font-medium text-gray-500 uppercase\">Đơn giá</th>\n                      <th className=\"px-4 py-2 text-left text-xs font-medium text-gray-500 uppercase\">Thành tiền</th>\n                    </tr>\n                  </thead>\n                  <tbody className=\"bg-white divide-y divide-gray-200\">\n                    {selectedOrder.items.map((item, index) => (\n                      <tr key={index}>\n                        <td className=\"px-4 py-2 text-sm text-gray-900\">{item.product.name}</td>\n                        <td className=\"px-4 py-2 text-sm text-gray-900\">{item.quantity}</td>\n                        <td className=\"px-4 py-2 text-sm text-gray-900\">{item.price.toLocaleString(\"vi-VN\")} VNĐ</td>\n                        <td className=\"px-4 py-2 text-sm text-gray-900\">\n                          {(item.quantity * item.price).toLocaleString(\"vi-VN\")} VNĐ\n                        </td>\n                      </tr>\n                    ))}\n                  </tbody>\n                </table>\n              </div>\n            </div>\n          </div>\n        </div>\n      )}\n    </div>\n  )\n}\n\nexport default Orders\n"],"mappings":"AAAA,YAAY,CAGZ,OAASA,QAAQ,CAAEC,SAAS,KAAQ,OAAO,QAAAC,GAAA,IAAAC,IAAA,CAAAC,IAAA,IAAAC,KAAA,CAAAC,QAAA,IAAAC,SAAA,yBA+B3C,KAAM,CAAAC,MAAgB,CAAGA,CAAA,GAAM,CAC7B,KAAM,CAACC,MAAM,CAAEC,SAAS,CAAC,CAAGV,QAAQ,CAAU,EAAE,CAAC,CACjD,KAAM,CAACW,QAAQ,CAAEC,WAAW,CAAC,CAAGZ,QAAQ,CAAY,EAAE,CAAC,CACvD,KAAM,CAACa,OAAO,CAAEC,UAAU,CAAC,CAAGd,QAAQ,CAAC,IAAI,CAAC,CAC5C,KAAM,CAACe,SAAS,CAAEC,YAAY,CAAC,CAAGhB,QAAQ,CAAC,KAAK,CAAC,CACjD,KAAM,CAACiB,eAAe,CAAEC,kBAAkB,CAAC,CAAGlB,QAAQ,CAAC,KAAK,CAAC,CAC7D,KAAM,CAACmB,aAAa,CAAEC,gBAAgB,CAAC,CAAGpB,QAAQ,CAAe,IAAI,CAAC,CACtE,KAAM,CAACqB,MAAM,CAAEC,SAAS,CAAC,CAAGtB,QAAQ,CAAC,KAAK,CAAC,CAC3C,KAAM,CAACuB,QAAQ,CAAEC,WAAW,CAAC,CAAGxB,QAAQ,CAAC,CACvCyB,YAAY,CAAE,EAAE,CAChBC,aAAa,CAAE,EAAE,CACjBC,KAAK,CAAE,CAAC,CAAEC,SAAS,CAAE,EAAE,CAAEC,QAAQ,CAAE,CAAE,CAAC,CACxC,CAAC,CAAC,CAEF5B,SAAS,CAAC,IAAM,CACd6B,WAAW,CAAC,CAAC,CACbC,aAAa,CAAC,CAAC,CACjB,CAAC,CAAE,EAAE,CAAC,CAEN,KAAM,CAAAD,WAAW,CAAG,KAAAA,CAAA,GAAY,CAC9B,GAAI,CACF,KAAM,CAAAE,KAAK,CAAGC,YAAY,CAACC,OAAO,CAAC,OAAO,CAAC,CAC3C,KAAM,CAAAC,QAAQ,CAAG,KAAM,CAAAC,KAAK,CAAC,kCAAkC,CAAE,CAC/DC,OAAO,CAAE,CACPC,aAAa,CAAE,UAAUN,KAAK,EAChC,CACF,CAAC,CAAC,CAEF,GAAIG,QAAQ,CAACI,EAAE,CAAE,CACf,KAAM,CAAAC,IAAI,CAAG,KAAM,CAAAL,QAAQ,CAACM,IAAI,CAAC,CAAC,CAClC/B,SAAS,CAAC8B,IAAI,CAAC,CACjB,CACF,CAAE,MAAOE,KAAK,CAAE,CACdC,OAAO,CAACD,KAAK,CAAC,wBAAwB,CAAEA,KAAK,CAAC,CAChD,CAAC,OAAS,CACR5B,UAAU,CAAC,KAAK,CAAC,CACnB,CACF,CAAC,CAED,KAAM,CAAAiB,aAAa,CAAG,KAAAA,CAAA,GAAY,CAChC,GAAI,CACF,KAAM,CAAAC,KAAK,CAAGC,YAAY,CAACC,OAAO,CAAC,OAAO,CAAC,CAC3C,KAAM,CAAAC,QAAQ,CAAG,KAAM,CAAAC,KAAK,CAAC,oCAAoC,CAAE,CACjEC,OAAO,CAAE,CACPC,aAAa,CAAE,UAAUN,KAAK,EAChC,CACF,CAAC,CAAC,CAEF,GAAIG,QAAQ,CAACI,EAAE,CAAE,CACf,KAAM,CAAAC,IAAI,CAAG,KAAM,CAAAL,QAAQ,CAACM,IAAI,CAAC,CAAC,CAClC7B,WAAW,CAAC4B,IAAI,CAAC,CACnB,CACF,CAAE,MAAOE,KAAK,CAAE,CACdC,OAAO,CAACD,KAAK,CAAC,0BAA0B,CAAEA,KAAK,CAAC,CAClD,CACF,CAAC,CAED,KAAM,CAAAE,YAAY,CAAG,KAAO,CAAAC,CAAkB,EAAK,CACjDA,CAAC,CAACC,cAAc,CAAC,CAAC,CAClBxB,SAAS,CAAC,IAAI,CAAC,CAEf,GAAI,CACF;AACA,GAAI,CAACC,QAAQ,CAACE,YAAY,CAACsB,IAAI,CAAC,CAAC,EAAI,CAACxB,QAAQ,CAACG,aAAa,CAACqB,IAAI,CAAC,CAAC,CAAE,CACnEC,KAAK,CAAC,4CAA4C,CAAC,CACnD1B,SAAS,CAAC,KAAK,CAAC,CAChB,OACF,CAEA;AACA,KAAM,CAAA2B,UAAU,CAAG1B,QAAQ,CAACI,KAAK,CAACuB,MAAM,CAAEC,IAAI,EAAKA,IAAI,CAACvB,SAAS,EAAIuB,IAAI,CAACtB,QAAQ,CAAG,CAAC,CAAC,CACvF,GAAIoB,UAAU,CAACG,MAAM,GAAK,CAAC,CAAE,CAC3BJ,KAAK,CAAC,qCAAqC,CAAC,CAC5C1B,SAAS,CAAC,KAAK,CAAC,CAChB,OACF,CAEA;AACA,IAAK,KAAM,CAAA6B,IAAI,GAAI,CAAAF,UAAU,CAAE,CAC7B,KAAM,CAAAI,OAAO,CAAG1C,QAAQ,CAAC2C,IAAI,CAAEC,CAAC,EAAKA,CAAC,CAACC,GAAG,GAAKL,IAAI,CAACvB,SAAS,CAAC,CAC9D,GAAIyB,OAAO,EAAIA,OAAO,CAACI,KAAK,CAAGN,IAAI,CAACtB,QAAQ,CAAE,CAC5CmB,KAAK,CAAC,aAAaK,OAAO,CAACK,IAAI,iCAAiCL,OAAO,CAACI,KAAK,EAAE,CAAC,CAChFnC,SAAS,CAAC,KAAK,CAAC,CAChB,OACF,CACF,CAEA,KAAM,CAAAU,KAAK,CAAGC,YAAY,CAACC,OAAO,CAAC,OAAO,CAAC,CAC3C,KAAM,CAAAC,QAAQ,CAAG,KAAM,CAAAC,KAAK,CAAC,kCAAkC,CAAE,CAC/DuB,MAAM,CAAE,MAAM,CACdtB,OAAO,CAAE,CACP,cAAc,CAAE,kBAAkB,CAClCC,aAAa,CAAE,UAAUN,KAAK,EAChC,CAAC,CACD4B,IAAI,CAAEC,IAAI,CAACC,SAAS,CAAC,CACnBrC,YAAY,CAAEF,QAAQ,CAACE,YAAY,CAACsB,IAAI,CAAC,CAAC,CAC1CrB,aAAa,CAAEH,QAAQ,CAACG,aAAa,CAACqB,IAAI,CAAC,CAAC,CAC5CpB,KAAK,CAAEsB,UACT,CAAC,CACH,CAAC,CAAC,CAEF,GAAId,QAAQ,CAACI,EAAE,CAAE,CACf,KAAM,CAAAT,WAAW,CAAC,CAAC,CACnB,KAAM,CAAAC,aAAa,CAAC,CAAC,CAAC;AACtBf,YAAY,CAAC,KAAK,CAAC,CACnB+C,SAAS,CAAC,CAAC,CACXf,KAAK,CAAC,0BAA0B,CAAC,CACnC,CAAC,IAAM,CACL,KAAM,CAAAN,KAAK,CAAG,KAAM,CAAAP,QAAQ,CAACM,IAAI,CAAC,CAAC,CACnCO,KAAK,CAACN,KAAK,CAACsB,OAAO,EAAI,iCAAiC,CAAC,CAC3D,CACF,CAAE,MAAOtB,KAAK,CAAE,CACdC,OAAO,CAACD,KAAK,CAAC,uBAAuB,CAAEA,KAAK,CAAC,CAC7CM,KAAK,CAAC,iCAAiC,CAAC,CAC1C,CAAC,OAAS,CACR1B,SAAS,CAAC,KAAK,CAAC,CAClB,CACF,CAAC,CAED,KAAM,CAAA2C,iBAAiB,CAAG,KAAAA,CAAOC,OAAe,CAAEC,SAAiB,GAAK,CACtE,GAAI,CACF,KAAM,CAAAnC,KAAK,CAAGC,YAAY,CAACC,OAAO,CAAC,OAAO,CAAC,CAC3C,KAAM,CAAAC,QAAQ,CAAG,KAAM,CAAAC,KAAK,CAAC,oCAAoC8B,OAAO,SAAS,CAAE,CACjFP,MAAM,CAAE,KAAK,CACbtB,OAAO,CAAE,CACP,cAAc,CAAE,kBAAkB,CAClCC,aAAa,CAAE,UAAUN,KAAK,EAChC,CAAC,CACD4B,IAAI,CAAEC,IAAI,CAACC,SAAS,CAAC,CAAEM,MAAM,CAAED,SAAU,CAAC,CAC5C,CAAC,CAAC,CAEF,GAAIhC,QAAQ,CAACI,EAAE,CAAE,CACf,KAAM,CAAAT,WAAW,CAAC,CAAC,CACnBkB,KAAK,CAAC,iCAAiC,CAAC,CAC1C,CAAC,IAAM,CACLA,KAAK,CAAC,wCAAwC,CAAC,CACjD,CACF,CAAE,MAAON,KAAK,CAAE,CACdC,OAAO,CAACD,KAAK,CAAC,8BAA8B,CAAEA,KAAK,CAAC,CACpDM,KAAK,CAAC,gBAAgB,CAAC,CACzB,CACF,CAAC,CAED,KAAM,CAAAe,SAAS,CAAGA,CAAA,GAAM,CACtBvC,WAAW,CAAC,CACVC,YAAY,CAAE,EAAE,CAChBC,aAAa,CAAE,EAAE,CACjBC,KAAK,CAAE,CAAC,CAAEC,SAAS,CAAE,EAAE,CAAEC,QAAQ,CAAE,CAAE,CAAC,CACxC,CAAC,CAAC,CACJ,CAAC,CAED,KAAM,CAAAwC,YAAY,CAAGA,CAAA,GAAM,CACzB7C,WAAW,CAAC,CACV,GAAGD,QAAQ,CACXI,KAAK,CAAE,CAAC,GAAGJ,QAAQ,CAACI,KAAK,CAAE,CAAEC,SAAS,CAAE,EAAE,CAAEC,QAAQ,CAAE,CAAE,CAAC,CAC3D,CAAC,CAAC,CACJ,CAAC,CAED,KAAM,CAAAyC,eAAe,CAAIC,KAAa,EAAK,CACzC,KAAM,CAAAC,QAAQ,CAAGjD,QAAQ,CAACI,KAAK,CAACuB,MAAM,CAAC,CAACuB,CAAC,CAAEC,CAAC,GAAKA,CAAC,GAAKH,KAAK,CAAC,CAC7D/C,WAAW,CAAC,CAAE,GAAGD,QAAQ,CAAEI,KAAK,CAAE6C,QAAS,CAAC,CAAC,CAC/C,CAAC,CAED,KAAM,CAAAG,eAAe,CAAGA,CAACJ,KAAa,CAAEK,KAAa,CAAEC,KAAU,GAAK,CACpE,KAAM,CAAAL,QAAQ,CAAG,CAAC,GAAGjD,QAAQ,CAACI,KAAK,CAAC,CACpC6C,QAAQ,CAACD,KAAK,CAAC,CAAG,CAAE,GAAGC,QAAQ,CAACD,KAAK,CAAC,CAAE,CAACK,KAAK,EAAGC,KAAM,CAAC,CACxDrD,WAAW,CAAC,CAAE,GAAGD,QAAQ,CAAEI,KAAK,CAAE6C,QAAS,CAAC,CAAC,CAC/C,CAAC,CAED,KAAM,CAAAM,cAAc,CAAIV,MAAc,EAAK,CACzC,OAAQA,MAAM,EACZ,IAAK,SAAS,CACZ,mBAAOjE,IAAA,SAAM4E,SAAS,CAAC,eAAe,CAAAC,QAAA,CAAC,wBAAS,CAAM,CAAC,CACzD,IAAK,WAAW,CACd,mBAAO7E,IAAA,SAAM4E,SAAS,CAAC,eAAe,CAAAC,QAAA,CAAC,kBAAU,CAAM,CAAC,CAC1D,IAAK,WAAW,CACd,mBAAO7E,IAAA,SAAM4E,SAAS,CAAC,cAAc,CAAAC,QAAA,CAAC,qBAAM,CAAM,CAAC,CACrD,QACE,mBAAO7E,IAAA,SAAM4E,SAAS,CAAC,YAAY,CAAAC,QAAA,CAAEZ,MAAM,CAAO,CAAC,CACvD,CACF,CAAC,CAED,KAAM,CAAAa,eAAe,CAAIC,KAAY,EAAK,CACxC9D,gBAAgB,CAAC8D,KAAK,CAAC,CACvBhE,kBAAkB,CAAC,IAAI,CAAC,CAC1B,CAAC,CAED,GAAIL,OAAO,CAAE,CACX,mBAAOV,IAAA,QAAK4E,SAAS,CAAC,kBAAkB,CAAAC,QAAA,CAAC,yCAAmB,CAAK,CAAC,CACpE,CAEA,mBACE3E,KAAA,QAAA2E,QAAA,eACE3E,KAAA,QAAK0E,SAAS,CAAC,wCAAwC,CAAAC,QAAA,eACrD7E,IAAA,OAAI4E,SAAS,CAAC,kCAAkC,CAAAC,QAAA,CAAC,uCAAgB,CAAI,CAAC,cACtE7E,IAAA,WAAQgF,OAAO,CAAEA,CAAA,GAAMnE,YAAY,CAAC,IAAI,CAAE,CAAC+D,SAAS,CAAC,aAAa,CAAAC,QAAA,CAAC,kCAEnE,CAAQ,CAAC,EACN,CAAC,cAGN7E,IAAA,QAAK4E,SAAS,CAAC,+CAA+C,CAAAC,QAAA,cAC5D7E,IAAA,QAAK4E,SAAS,CAAC,kBAAkB,CAAAC,QAAA,cAC/B3E,KAAA,UAAO0E,SAAS,CAAC,qCAAqC,CAAAC,QAAA,eACpD7E,IAAA,UAAO4E,SAAS,CAAC,YAAY,CAAAC,QAAA,cAC3B3E,KAAA,OAAA2E,QAAA,eACE7E,IAAA,OAAI4E,SAAS,CAAC,gFAAgF,CAAAC,QAAA,CAAC,6BAE/F,CAAI,CAAC,cACL7E,IAAA,OAAI4E,SAAS,CAAC,gFAAgF,CAAAC,QAAA,CAAC,kBAE/F,CAAI,CAAC,cACL7E,IAAA,OAAI4E,SAAS,CAAC,gFAAgF,CAAAC,QAAA,CAAC,kBAE/F,CAAI,CAAC,cACL7E,IAAA,OAAI4E,SAAS,CAAC,gFAAgF,CAAAC,QAAA,CAAC,mCAE/F,CAAI,CAAC,cACL7E,IAAA,OAAI4E,SAAS,CAAC,gFAAgF,CAAAC,QAAA,CAAC,qBAE/F,CAAI,CAAC,cACL7E,IAAA,OAAI4E,SAAS,CAAC,gFAAgF,CAAAC,QAAA,CAAC,oBAE/F,CAAI,CAAC,cACL7E,IAAA,OAAI4E,SAAS,CAAC,gFAAgF,CAAAC,QAAA,CAAC,aAE/F,CAAI,CAAC,EACH,CAAC,CACA,CAAC,cACR7E,IAAA,UAAO4E,SAAS,CAAC,mCAAmC,CAAAC,QAAA,CACjDvE,MAAM,CAAC2E,GAAG,CAAEF,KAAK,eAChB7E,KAAA,OAAA2E,QAAA,eACE7E,IAAA,OAAI4E,SAAS,CAAC,+DAA+D,CAAAC,QAAA,CAAEE,KAAK,CAACG,WAAW,CAAK,CAAC,cACtGlF,IAAA,OAAI4E,SAAS,CAAC,mDAAmD,CAAAC,QAAA,CAC9D,GAAI,CAAAM,IAAI,CAACJ,KAAK,CAACK,SAAS,CAAC,CAACC,kBAAkB,CAAC,OAAO,CAAC,CACpD,CAAC,cACLrF,IAAA,OAAI4E,SAAS,CAAC,mDAAmD,CAAAC,QAAA,CAAEE,KAAK,CAACzD,YAAY,CAAK,CAAC,cAC3FtB,IAAA,OAAI4E,SAAS,CAAC,mDAAmD,CAAAC,QAAA,CAAEE,KAAK,CAACxD,aAAa,CAAK,CAAC,cAC5FrB,KAAA,OAAI0E,SAAS,CAAC,mDAAmD,CAAAC,QAAA,EAC9DE,KAAK,CAACO,WAAW,CAACC,cAAc,CAAC,OAAO,CAAC,CAAC,WAC7C,EAAI,CAAC,cACLvF,IAAA,OAAI4E,SAAS,CAAC,6BAA6B,CAAAC,QAAA,CAAEF,cAAc,CAACI,KAAK,CAACd,MAAM,CAAC,CAAK,CAAC,cAC/E/D,KAAA,OAAI0E,SAAS,CAAC,iDAAiD,CAAAC,QAAA,eAC7D7E,IAAA,WAAQgF,OAAO,CAAEA,CAAA,GAAMF,eAAe,CAACC,KAAK,CAAE,CAACH,SAAS,CAAC,wCAAwC,CAAAC,QAAA,CAAC,eAElG,CAAQ,CAAC,CACRE,KAAK,CAACd,MAAM,GAAK,SAAS,eACzB/D,KAAA,CAAAE,SAAA,EAAAyE,QAAA,eACE7E,IAAA,WACEgF,OAAO,CAAEA,CAAA,GAAMlB,iBAAiB,CAACiB,KAAK,CAAC1B,GAAG,CAAE,WAAW,CAAE,CACzDuB,SAAS,CAAC,0CAA0C,CAAAC,QAAA,CACrD,kBAED,CAAQ,CAAC,cACT7E,IAAA,WACEgF,OAAO,CAAEA,CAAA,GAAMlB,iBAAiB,CAACiB,KAAK,CAAC1B,GAAG,CAAE,WAAW,CAAE,CACzDuB,SAAS,CAAC,iCAAiC,CAAAC,QAAA,CAC5C,UAED,CAAQ,CAAC,EACT,CACH,EACC,CAAC,GA/BEE,KAAK,CAAC1B,GAgCX,CACL,CAAC,CACG,CAAC,EACH,CAAC,CACL,CAAC,CACH,CAAC,CAGLzC,SAAS,eACRZ,IAAA,QAAK4E,SAAS,CAAC,4EAA4E,CAAAC,QAAA,cACzF7E,IAAA,QAAK4E,SAAS,CAAC,mFAAmF,CAAAC,QAAA,cAChG3E,KAAA,QAAK0E,SAAS,CAAC,MAAM,CAAAC,QAAA,eACnB7E,IAAA,OAAI4E,SAAS,CAAC,wCAAwC,CAAAC,QAAA,CAAC,yCAAgB,CAAI,CAAC,cAC5E3E,KAAA,SAAMsF,QAAQ,CAAE/C,YAAa,CAAAoC,QAAA,eAC3B3E,KAAA,QAAK0E,SAAS,CAAC,6BAA6B,CAAAC,QAAA,eAC1C3E,KAAA,QAAA2E,QAAA,eACE7E,IAAA,UAAO4E,SAAS,CAAC,4CAA4C,CAAAC,QAAA,CAAC,2BAAgB,CAAO,CAAC,cACtF7E,IAAA,UACEyF,IAAI,CAAC,MAAM,CACXf,KAAK,CAAEtD,QAAQ,CAACE,YAAa,CAC7BoE,QAAQ,CAAGhD,CAAC,EAAKrB,WAAW,CAAC,CAAE,GAAGD,QAAQ,CAAEE,YAAY,CAAEoB,CAAC,CAACiD,MAAM,CAACjB,KAAM,CAAC,CAAE,CAC5EE,SAAS,CAAC,YAAY,CACtBgB,QAAQ,MACT,CAAC,EACC,CAAC,cACN1F,KAAA,QAAA2E,QAAA,eACE7E,IAAA,UAAO4E,SAAS,CAAC,4CAA4C,CAAAC,QAAA,CAAC,qCAAe,CAAO,CAAC,cACrF7E,IAAA,UACEyF,IAAI,CAAC,KAAK,CACVf,KAAK,CAAEtD,QAAQ,CAACG,aAAc,CAC9BmE,QAAQ,CAAGhD,CAAC,EAAKrB,WAAW,CAAC,CAAE,GAAGD,QAAQ,CAAEG,aAAa,CAAEmB,CAAC,CAACiD,MAAM,CAACjB,KAAM,CAAC,CAAE,CAC7EE,SAAS,CAAC,YAAY,CACtBgB,QAAQ,MACT,CAAC,EACC,CAAC,EACH,CAAC,cAEN1F,KAAA,QAAK0E,SAAS,CAAC,MAAM,CAAAC,QAAA,eACnB7E,IAAA,UAAO4E,SAAS,CAAC,4CAA4C,CAAAC,QAAA,CAAC,oBAAQ,CAAO,CAAC,CAC7EzD,QAAQ,CAACI,KAAK,CAACyD,GAAG,CAAC,CAACjC,IAAI,CAAEoB,KAAK,QAAAyB,cAAA,CAAAC,eAAA,oBAC9B5F,KAAA,QAAiB0E,SAAS,CAAC,8BAA8B,CAAAC,QAAA,eACvD7E,IAAA,QAAK4E,SAAS,CAAC,QAAQ,CAAAC,QAAA,cACrB3E,KAAA,WACEwE,KAAK,CAAE1B,IAAI,CAACvB,SAAU,CACtBiE,QAAQ,CAAGhD,CAAC,EAAK8B,eAAe,CAACJ,KAAK,CAAE,WAAW,CAAE1B,CAAC,CAACiD,MAAM,CAACjB,KAAK,CAAE,CACrEE,SAAS,CAAC,YAAY,CACtBgB,QAAQ,MAAAf,QAAA,eAER7E,IAAA,WAAQ0E,KAAK,CAAC,EAAE,CAAAG,QAAA,CAAC,8BAAa,CAAQ,CAAC,CACtCrE,QAAQ,CACNuC,MAAM,CAAEK,CAAC,EAAKA,CAAC,CAACE,KAAK,CAAG,CAAC,CAAC,CAC1B2B,GAAG,CAAE/B,OAAO,eACXhD,KAAA,WAA0BwE,KAAK,CAAExB,OAAO,CAACG,GAAI,CAAAwB,QAAA,EAC1C3B,OAAO,CAACK,IAAI,CAAC,KAAG,CAACL,OAAO,CAAC6C,SAAS,CAACR,cAAc,CAAC,OAAO,CAAC,CAAC,qBAAW,CAACrC,OAAO,CAACI,KAAK,CAAC,GACxF,GAFaJ,OAAO,CAACG,GAEb,CACT,CAAC,EACE,CAAC,CACN,CAAC,cACNrD,IAAA,QAAK4E,SAAS,CAAC,MAAM,CAAAC,QAAA,cACnB7E,IAAA,UACEyF,IAAI,CAAC,QAAQ,CACbf,KAAK,CAAE1B,IAAI,CAACtB,QAAS,CACrBgE,QAAQ,CAAGhD,CAAC,EAAK8B,eAAe,CAACJ,KAAK,CAAE,UAAU,CAAE4B,MAAM,CAACtD,CAAC,CAACiD,MAAM,CAACjB,KAAK,CAAC,CAAE,CAC5EE,SAAS,CAAC,YAAY,CACtBqB,GAAG,CAAC,GAAG,CACPC,GAAG,CAAE,EAAAL,cAAA,CAAArF,QAAQ,CAAC2C,IAAI,CAAEC,CAAC,EAAKA,CAAC,CAACC,GAAG,GAAKL,IAAI,CAACvB,SAAS,CAAC,UAAAoE,cAAA,iBAA9CA,cAAA,CAAgDvC,KAAK,GAAI,GAAI,CAClEsC,QAAQ,MACT,CAAC,CACC,CAAC,cACN5F,IAAA,QAAK4E,SAAS,CAAC,4BAA4B,CAAAC,QAAA,CACxC7B,IAAI,CAACvB,SAAS,eACbvB,KAAA,SAAA2E,QAAA,EACG,CACC,CAAC,EAAAiB,eAAA,CAAAtF,QAAQ,CAAC2C,IAAI,CAAEC,CAAC,EAAKA,CAAC,CAACC,GAAG,GAAKL,IAAI,CAACvB,SAAS,CAAC,UAAAqE,eAAA,iBAA9CA,eAAA,CAAgDC,SAAS,GAAI,CAAC,EAAI/C,IAAI,CAACtB,QAAQ,EAChF6D,cAAc,CAAC,OAAO,CAAC,CAAE,GAAG,CAAC,UAEjC,EAAM,CACP,CACE,CAAC,CACLnE,QAAQ,CAACI,KAAK,CAACyB,MAAM,CAAG,CAAC,eACxBjD,IAAA,WACEyF,IAAI,CAAC,QAAQ,CACbT,OAAO,CAAEA,CAAA,GAAMb,eAAe,CAACC,KAAK,CAAE,CACtCQ,SAAS,CAAC,8BAA8B,CAAAC,QAAA,CACzC,QAED,CAAQ,CACT,GA/COT,KAgDL,CAAC,EACP,CAAC,cACFpE,IAAA,WAAQyF,IAAI,CAAC,QAAQ,CAACT,OAAO,CAAEd,YAAa,CAACU,SAAS,CAAC,4BAA4B,CAAAC,QAAA,CAAC,8BAEpF,CAAQ,CAAC,cAGT7E,IAAA,QAAK4E,SAAS,CAAC,gCAAgC,CAAAC,QAAA,cAC7C3E,KAAA,QAAK0E,SAAS,CAAC,mCAAmC,CAAAC,QAAA,eAChD7E,IAAA,SAAM4E,SAAS,CAAC,aAAa,CAAAC,QAAA,CAAC,sBAAU,CAAM,CAAC,cAC/C3E,KAAA,SAAM0E,SAAS,CAAC,iCAAiC,CAAAC,QAAA,EAC9CzD,QAAQ,CAACI,KAAK,CACZ2E,MAAM,CAAC,CAACC,KAAK,CAAEpD,IAAI,GAAK,CACvB,KAAM,CAAAE,OAAO,CAAG1C,QAAQ,CAAC2C,IAAI,CAAEC,CAAC,EAAKA,CAAC,CAACC,GAAG,GAAKL,IAAI,CAACvB,SAAS,CAAC,CAC9D,MAAO,CAAA2E,KAAK,EAAIlD,OAAO,CAAGA,OAAO,CAAC6C,SAAS,CAAG/C,IAAI,CAACtB,QAAQ,CAAG,CAAC,CAAC,CAClE,CAAC,CAAE,CAAC,CAAC,CACJ6D,cAAc,CAAC,OAAO,CAAC,CAAE,GAAG,CAAC,UAElC,EAAM,CAAC,EACJ,CAAC,CACH,CAAC,EACH,CAAC,cAENrF,KAAA,QAAK0E,SAAS,CAAC,4BAA4B,CAAAC,QAAA,eACzC7E,IAAA,WAAQyF,IAAI,CAAC,QAAQ,CAACT,OAAO,CAAEA,CAAA,GAAMnE,YAAY,CAAC,KAAK,CAAE,CAAC+D,SAAS,CAAC,eAAe,CAACyB,QAAQ,CAAEnF,MAAO,CAAA2D,QAAA,CAAC,UAEtG,CAAQ,CAAC,cACT7E,IAAA,WAAQyF,IAAI,CAAC,QAAQ,CAACb,SAAS,CAAC,iCAAiC,CAACyB,QAAQ,CAAEnF,MAAO,CAAA2D,QAAA,CAChF3D,MAAM,CAAG,aAAa,CAAG,cAAc,CAClC,CAAC,EACN,CAAC,EACF,CAAC,EACJ,CAAC,CACH,CAAC,CACH,CACN,CAGAJ,eAAe,EAAIE,aAAa,eAC/BhB,IAAA,QAAK4E,SAAS,CAAC,4EAA4E,CAAAC,QAAA,cACzF7E,IAAA,QAAK4E,SAAS,CAAC,mFAAmF,CAAAC,QAAA,cAChG3E,KAAA,QAAK0E,SAAS,CAAC,MAAM,CAAAC,QAAA,eACnB3E,KAAA,QAAK0E,SAAS,CAAC,wCAAwC,CAAAC,QAAA,eACrD7E,IAAA,OAAI4E,SAAS,CAAC,mCAAmC,CAAAC,QAAA,CAAC,qCAAiB,CAAI,CAAC,cACxE7E,IAAA,WAAQgF,OAAO,CAAEA,CAAA,GAAMjE,kBAAkB,CAAC,KAAK,CAAE,CAAC6D,SAAS,CAAC,mCAAmC,CAAAC,QAAA,CAAC,QAEhG,CAAQ,CAAC,EACN,CAAC,cAEN3E,KAAA,QAAK0E,SAAS,CAAC,6BAA6B,CAAAC,QAAA,eAC1C3E,KAAA,QAAA2E,QAAA,eACE3E,KAAA,MAAA2E,QAAA,eACE7E,IAAA,WAAA6E,QAAA,CAAQ,8BAAY,CAAQ,CAAC,IAAC,CAAC7D,aAAa,CAACkE,WAAW,EACvD,CAAC,cACJhF,KAAA,MAAA2E,QAAA,eACE7E,IAAA,WAAA6E,QAAA,CAAQ,mBAAW,CAAQ,CAAC,IAAC,CAAC7D,aAAa,CAACM,YAAY,EACvD,CAAC,cACJpB,KAAA,MAAA2E,QAAA,eACE7E,IAAA,WAAA6E,QAAA,CAAQ,oCAAc,CAAQ,CAAC,IAAC,CAAC7D,aAAa,CAACO,aAAa,EAC3D,CAAC,EACD,CAAC,cACNrB,KAAA,QAAA2E,QAAA,eACE3E,KAAA,MAAA2E,QAAA,eACE7E,IAAA,WAAA6E,QAAA,CAAQ,mBAAS,CAAQ,CAAC,IAAC,CAAC,GAAI,CAAAM,IAAI,CAACnE,aAAa,CAACoE,SAAS,CAAC,CAACG,cAAc,CAAC,OAAO,CAAC,EACpF,CAAC,cACJrF,KAAA,MAAA2E,QAAA,eACE7E,IAAA,WAAA6E,QAAA,CAAQ,qBAAW,CAAQ,CAAC,IAAC,CAACF,cAAc,CAAC3D,aAAa,CAACiD,MAAM,CAAC,EACjE,CAAC,cACJ/D,KAAA,MAAA2E,QAAA,eACE7E,IAAA,WAAA6E,QAAA,CAAQ,sBAAU,CAAQ,CAAC,IAAC,CAAC7D,aAAa,CAACsE,WAAW,CAACC,cAAc,CAAC,OAAO,CAAC,CAAC,WACjF,EAAG,CAAC,EACD,CAAC,EACH,CAAC,cAENrF,KAAA,QAAK0E,SAAS,CAAC,MAAM,CAAAC,QAAA,eACnB7E,IAAA,OAAI4E,SAAS,CAAC,kBAAkB,CAAAC,QAAA,CAAC,kCAAmB,CAAI,CAAC,cACzD3E,KAAA,UAAO0E,SAAS,CAAC,qCAAqC,CAAAC,QAAA,eACpD7E,IAAA,UAAO4E,SAAS,CAAC,YAAY,CAAAC,QAAA,cAC3B3E,KAAA,OAAA2E,QAAA,eACE7E,IAAA,OAAI4E,SAAS,CAAC,iEAAiE,CAAAC,QAAA,CAAC,oBAAQ,CAAI,CAAC,cAC7F7E,IAAA,OAAI4E,SAAS,CAAC,iEAAiE,CAAAC,QAAA,CAAC,yBAAQ,CAAI,CAAC,cAC7F7E,IAAA,OAAI4E,SAAS,CAAC,iEAAiE,CAAAC,QAAA,CAAC,sBAAO,CAAI,CAAC,cAC5F7E,IAAA,OAAI4E,SAAS,CAAC,iEAAiE,CAAAC,QAAA,CAAC,oBAAU,CAAI,CAAC,EAC7F,CAAC,CACA,CAAC,cACR7E,IAAA,UAAO4E,SAAS,CAAC,mCAAmC,CAAAC,QAAA,CACjD7D,aAAa,CAACQ,KAAK,CAACyD,GAAG,CAAC,CAACjC,IAAI,CAAEoB,KAAK,gBACnClE,KAAA,OAAA2E,QAAA,eACE7E,IAAA,OAAI4E,SAAS,CAAC,iCAAiC,CAAAC,QAAA,CAAE7B,IAAI,CAACE,OAAO,CAACK,IAAI,CAAK,CAAC,cACxEvD,IAAA,OAAI4E,SAAS,CAAC,iCAAiC,CAAAC,QAAA,CAAE7B,IAAI,CAACtB,QAAQ,CAAK,CAAC,cACpExB,KAAA,OAAI0E,SAAS,CAAC,iCAAiC,CAAAC,QAAA,EAAE7B,IAAI,CAACsD,KAAK,CAACf,cAAc,CAAC,OAAO,CAAC,CAAC,WAAI,EAAI,CAAC,cAC7FrF,KAAA,OAAI0E,SAAS,CAAC,iCAAiC,CAAAC,QAAA,EAC5C,CAAC7B,IAAI,CAACtB,QAAQ,CAAGsB,IAAI,CAACsD,KAAK,EAAEf,cAAc,CAAC,OAAO,CAAC,CAAC,WACxD,EAAI,CAAC,GANEnB,KAOL,CACL,CAAC,CACG,CAAC,EACH,CAAC,EACL,CAAC,EACH,CAAC,CACH,CAAC,CACH,CACN,EACE,CAAC,CAEV,CAAC,CAED,cAAe,CAAA/D,MAAM","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}